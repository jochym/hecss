---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "00_Setup.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_Setup.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">Setup<a class="anchor-link" href="#Setup"> </a></h2><p>At the moment the HECSS sampler supports only VASP and ASAP3/OpenKIM calculators. However, it is explicitly written in such a way that it should be quite easy to extend it to other calculators (e.g. QE, AbInit). The VASP and ASAP calculators are simply the only ones tested so far. The following instructions cover only VASP. Contributions extending support to other calculators are welcomed and will be included in the distribution.</p>
<h3 id="VASP-calculator">VASP calculator<a class="anchor-link" href="#VASP-calculator"> </a></h3><p>After installing of the HECSS package you need to configure it. This involves configuring ASE (Atomistic Simulation Environment) to be able to generate VASP input files. Refer to <a href="https://wiki.fysik.dtu.dk/ase/ase/calculators/vasp.html">ASE documentation</a> for details. Usually yu need to:</p>
<ol>
<li>Put your pseudopotential files in a dedicated directory tree as described  in the docs. My setup contains a directory with three subdirs for LDA, GGA, and PBE pseudopotentials:<div class="highlight"><pre><span></span>potpaw  
potpaw_GGA  
potpaw_PBE
</pre></div>
</li>
<li>Setting the <code>VASP_PP_PATH</code> environment variable to the location of this directory</li>
<li>Preparing the <code>run-calc</code> script to execute vasp in your setup. The script <em>must</em> wait for the calculation to finish before it returns. The example script is included in the source and for SLURM queu manager may look similar to the following code:</li>
</ol>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># This script should run vasp in current directory </span>
<span class="c1"># and wait for the run to finish.</span>
<span class="c1"># </span>
<span class="c1"># A generic line using SLURM would look like this:</span>
<span class="c1">#</span>
<span class="c1"># sbatch [job_params] -W vasp_running_script</span>
<span class="c1">#</span>
<span class="c1"># The &quot;-W&quot; param makes the sbatch command wait for the job to finish.</span>


<span class="nv">JN</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<span class="nv">JN</span><span class="o">=</span><span class="sb">`</span>basename <span class="si">${</span><span class="nv">JN</span><span class="si">}</span><span class="sb">`</span>

<span class="c1"># Partition of the cluster</span>
<span class="nv">PART</span><span class="o">=</span>small

<span class="c1"># Number of nodes</span>
<span class="nv">N</span><span class="o">=</span><span class="m">1</span>

<span class="c1"># Number of MPI tasks</span>
<span class="nv">ntask</span><span class="o">=</span><span class="m">64</span>

<span class="c1"># Name the job after directory if no label is passed as first argument</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">.&quot;</span> !<span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nv">JN</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span>
<span class="k">fi</span>

sbatch -W -J <span class="si">${</span><span class="nv">JN</span><span class="si">}</span> -p <span class="nv">$PART</span> -N <span class="nv">$N</span> -n <span class="nv">$ntask</span> run-vasp-script
</pre></div>
<p>You need to adapt it to your setup. The script works properly if you can go to the directory with the prepared VASP configuration and execute <code>run-calc</code> and have it run vasp in the directory and finish after the VASP job ends.</p>

</div>
</div>
</div>
</div>
 

