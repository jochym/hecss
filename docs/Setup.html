---

title: Setup


keywords: fastai
sidebar: home_sidebar

summary: "At the moment the HECSS sampler supports only VASP and ASAP3/OpenKIM calculators. However, it is explicitly written in such a way that it should be quite easy to extend it to other calculators (e.g. QE, AbInit). The VASP and ASAP calculators are simply the only ones tested so far. The following instructions cover only VASP. Contributions extending support to other calculators are welcomed and will be included in the distribution."
description: "At the moment the HECSS sampler supports only VASP and ASAP3/OpenKIM calculators. However, it is explicitly written in such a way that it should be quite easy to extend it to other calculators (e.g. QE, AbInit). The VASP and ASAP calculators are simply the only ones tested so far. The following instructions cover only VASP. Contributions extending support to other calculators are welcomed and will be included in the distribution."
nb_path: "00_Setup.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_Setup.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Source-code/example-data-installation">Source code/example data installation<a class="anchor-link" href="#Source-code/example-data-installation"> </a></h2><p>The example data is not distribiuted within the library package. However, when you learn the software it is usefull to have some pre-calculated results and template configs to have a starting point. The <code>example</code> directory in the source distribution contains template configuration files for a calculation (<code>VASP_3C-SiC</code> subdirectory) and the example data calculated for the same systems (<code>VASP_3C-SiC_calculated</code> subdirectory).
As the name suggests these are 1x1x1 and 2x2x2 supercells of the 3C-SiC (cubic silicon carbide) calculated with VASP DFT calculator.</p>
<p>To obtain the data you need to download the zip archive from the source repository: <a href="https://gitlab.com/jochym/hecss/-/archive/master/hecss-master.zip?path=example">hecss-examples.zip</a></p>
<p>The source is published at the <a href="https://gitlab.com/jochym/hecss">Gitlab hecss repository</a>. 
You can access it with git (recommended, particularly if you want to contribute to the development):</p>
<div class="highlight"><pre><span></span>git clone https://gitlab.com/jochym/hecss.git
</pre></div>
<p>or you can download the whole distribution as a zip archive: <a href="https://gitlab.com/jochym/hecss/-/archive/master/hecss-master.zip">hecss.zip</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="VASP-calculator">VASP calculator<a class="anchor-link" href="#VASP-calculator"> </a></h2><p>After installing of the HECSS package you need to configure it. This involves configuring ASE (Atomistic Simulation Environment) to be able to generate VASP input files. Refer to <a href="https://wiki.fysik.dtu.dk/ase/ase/calculators/vasp.html">ASE documentation</a> for details. Usually yu need to:</p>
<ol>
<li>Put your pseudopotential files in a dedicated directory tree as described  in the docs. My setup contains a directory with three subdirs for LDA, GGA, and PBE pseudopotentials:</li>
</ol>
<div class="highlight"><pre><span></span>potpaw  
potpaw_GGA  
potpaw_PBE
</pre></div>
<ol>
<li>Setting the <code>VASP_PP_PATH</code> environment variable to the location of this directory</li>
<li>Preparing the <code>run-calc</code> script to execute vasp in your setup. The script <em>must</em> wait for the calculation to finish before it returns. The example script is included in the source and for SLURM queu manager may look similar to the following code:</li>
</ol>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># This script should run vasp in current directory </span>
<span class="c1"># and wait for the run to finish.</span>
<span class="c1"># </span>
<span class="c1"># A generic line using SLURM would look like this:</span>
<span class="c1">#</span>
<span class="c1"># sbatch [job_params] -W vasp_running_script</span>
<span class="c1">#</span>
<span class="c1"># The &quot;-W&quot; param makes the sbatch command wait for the job to finish.</span>


<span class="nv">JN</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<span class="nv">JN</span><span class="o">=</span><span class="sb">`</span>basename <span class="si">${</span><span class="nv">JN</span><span class="si">}</span><span class="sb">`</span>

<span class="c1"># Partition of the cluster</span>
<span class="nv">PART</span><span class="o">=</span>small

<span class="c1"># Number of nodes</span>
<span class="nv">N</span><span class="o">=</span><span class="m">1</span>

<span class="c1"># Number of MPI tasks</span>
<span class="nv">ntask</span><span class="o">=</span><span class="m">64</span>

<span class="c1"># Name the job after directory if no label is passed as first argument</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">.&quot;</span> !<span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nv">JN</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span>
<span class="k">fi</span>

sbatch -W -J <span class="si">${</span><span class="nv">JN</span><span class="si">}</span> -p <span class="nv">$PART</span> -N <span class="nv">$N</span> -n <span class="nv">$ntask</span> run-vasp-script
</pre></div>
<p>You need to adapt the script to your setup. The script works properly if you can go to the directory with the prepared VASP configuration and execute <code>run-calc</code> and have it run vasp in the directory and finish after the VASP job ends.</p>

</div>
</div>
</div>
</div>


